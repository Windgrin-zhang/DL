# ex5 偏差和方差练习代码修复说明

## 修复的问题

### 1. **theta初始化错误**
- **问题**: `theta = np.ones(X.shape[0])` 
- **修复**: `theta = np.ones(X.shape[1])`
- **原因**: theta应该与特征数量匹配，不是样本数量

### 2. **seaborn参数问题**
- **问题**: `sns.lmplot(..., size=7)`
- **修复**: `sns.lmplot(..., height=7)`
- **原因**: 新版本seaborn中`size`参数已弃用，改为`height`

### 3. **pandas弃用方法**
- **问题**: `.as_matrix()` 方法
- **修复**: `.values` 属性
- **原因**: pandas新版本中`.as_matrix()`已弃用，推荐使用`.values`

### 4. **代码格式优化**
- **问题**: seaborn参数格式不一致
- **修复**: 统一参数格式
- **原因**: 提高代码可读性

## 修复后的功能验证

✅ **数据加载**: 正常加载ex5data1.mat文件
✅ **线性回归**: 代价函数、梯度计算、优化训练
✅ **多项式特征**: 特征扩展、归一化、截距项添加
✅ **学习曲线**: 不同λ值的学习曲线绘制
✅ **正则化**: 不同正则化强度的效果对比
✅ **模型选择**: 最优λ值的选择和测试集评估

## 运行结果

- **最优λ值**: 1.0 (根据交叉验证结果)
- **测试集性能**: λ=0.3时测试代价最小 (7.336513)
- **过拟合检测**: 多项式模型在λ=0时明显过拟合
- **欠拟合检测**: 线性模型存在欠拟合问题

## 使用方法

1. 直接运行Jupyter notebook: `ML-Exercise5.ipynb`
2. 或运行测试脚本: `python test_ex5.py`

## 依赖包

```bash
pip install numpy scipy pandas matplotlib seaborn
```

## 注意事项

1. 确保`ex5data1.mat`数据文件在同一目录下
2. 如果遇到matplotlib显示问题，可能需要配置后端
3. 建议在Jupyter环境中运行以获得最佳可视化效果 